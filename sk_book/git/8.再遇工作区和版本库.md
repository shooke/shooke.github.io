---
title: 8.再遇工作区和版本库
categories:
  - 一点一点了解git
tags:
  - git
date: 2019-12-17 14:56:10
---
## 小白的故事

> 本故事纯属虚构，如有雷同，^0^那可太巧了

”大神我看你用使用`git reset`时使用了`--hard`参数，是不是还有其他参数啊。“小白虚心问道
”小伙很细心啊，不错，还有其余的2个参数，我挨个给你讲吧。刚才用过--hard，咱们从他讲起。咱们先创建个文件，加两条commit，方便讲解“老鸟说到
```
$ echo "1"> test.txt
$ git add test.txt
$ git commit -m "1"
$ echo "2"> test.txt
$ git add test.txt
$ git commit -m "2"

```
"咱们创建了2条commit记录了，第一条记录`test.txt`里的内容是`1`，第二条记录`test.txt`里的内容是`2`。先看一下记录" 老鸟说
```
$ git log
commit a609df431578e5061b5d0261bfa38cb0fa01efb1 (HEAD -> master)
Author: shooke <xingjiehu@163.com>
Date:   Wed Mar 18 16:42:11 2020 +0800

    2

commit b5a6d3a6c4d4f5899645f9469f116b050c9426b5
Author: shooke <xingjiehu@163.com>
Date:   Wed Mar 18 16:41:55 2020 +0800

    1
```
"接下来，咱们撤销一下看看效果"老鸟继续教导小白
```
$ git reset --hard HEAD^
HEAD is now at b5a6d3a 1
git log
commit b5a6d3a6c4d4f5899645f9469f116b050c9426b5 (HEAD -> master)
Author: shooke <xingjiehu@163.com>
Date:   Wed Mar 18 16:41:55 2020 +0800

    1

```
”现在历史被撤回了，咱们看git的状态“ 老鸟说
```
$ git status
On branch master
nothing to commit, working tree clean
```
”你看工作区和暂存区都是空的对吧“老鸟说
”恩恩，文件内容应该变成1了“小白说
```
$ cat test.txt
1
```
"回答正确，咱们先把历史还原，然后再来试试另一个参数"老鸟说。
```
$ git reset --hard a609df431578e5061b5d0261bfa38cb0fa01efb1
HEAD is now at a609df4 2
$ git log
commit a609df431578e5061b5d0261bfa38cb0fa01efb1 (HEAD -> master)
Author: shooke <xingjiehu@163.com>
Date:   Wed Mar 18 16:42:11 2020 +0800

    2

commit b5a6d3a6c4d4f5899645f9469f116b050c9426b5
Author: shooke <xingjiehu@163.com>
Date:   Wed Mar 18 16:41:55 2020 +0800

    1

```
"接下来试试`--mixed`,看看会是什么效果"老鸟说
```
$ git reset --mixed HEAD^
Unstaged changes after reset:
M	test.txt


```





## 小结
- `--hard` 重置stage区和工作目录
- `--mixed` 保留工作目录，并清空暂存区，执行`git checkout <file>`可撤销修改
- `--soft` 保留工作目录，并把重置 HEAD 所带来的新的差异放进暂存区。如果要撤回需要先执行`git reset HEAD <file>`撤销暂存区，然后执行`git checkout <file>` 撤销修改
